<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="660px" preserveAspectRatio="none" style="width:471px;height:660px;" version="1.1" viewBox="0 0 471 660" width="471px" zoomAndPan="magnify"><defs><filter height="300%" id="fwcpwgdsekhuq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster de.gematik.ti.cardreader.provider.bluetooth.feitian.control--><polygon fill="#FFFFFF" filter="url(#fwcpwgdsekhuq)" points="22,80,439,80,446,103.6094,449,103.6094,449,648,22,648,22,80" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="446" y1="103.6094" y2="103.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="411" x="26" y="96.5332">de.gematik.ti.cardreader.provider.bluetooth.feitian.control</text><!--class FeitianCardReaderController--><rect fill="#FEFECE" filter="url(#fwcpwgdsekhuq)" height="324.7188" id="FeitianCardReaderController" style="stroke: #A80036; stroke-width: 1.5;" width="224" x="123" y="116"/><ellipse cx="152.85" cy="132" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M154.85,128.5 Q155.0531,128 155.2875,127.75 Q155.5219,127.5 155.7875,127.5 Q156.2563,127.5 156.5531,127.7813 Q156.85,128.0625 156.85,128.7188 L156.85,130.2813 Q156.85,130.9375 156.5688,131.2188 Q156.2875,131.5 155.85,131.5 Q155.4594,131.5 155.2094,131.3281 Q154.9594,131.1563 154.85,130.7031 Q154.8031,130.3906 154.6313,130.2188 Q154.3188,129.8906 153.7563,129.6953 Q153.1938,129.5 152.6313,129.5 Q151.9281,129.5 151.3422,129.7813 Q150.7563,130.0625 150.3031,130.6875 Q149.85,131.3125 149.85,132.1719 L149.85,133.0938 Q149.85,134.125 150.6938,134.8125 Q151.5375,135.5 153.0375,135.5 Q153.9281,135.5 154.5531,135.2969 Q154.9125,135.1875 155.3188,134.8281 Q155.5844,134.625 155.725,134.5625 Q155.8656,134.5 156.0375,134.5 Q156.3656,134.5 156.6078,134.7578 Q156.85,135.0156 156.85,135.375 Q156.85,135.7188 156.5063,136.125 Q156.0063,136.7188 155.2094,137.0469 Q154.1625,137.5 152.8813,137.5 Q151.3813,137.5 150.1781,136.9063 Q149.2094,136.4375 148.5297,135.4219 Q147.85,134.4063 147.85,133.2031 L147.85,132.1094 Q147.85,130.8594 148.4516,129.7656 Q149.0531,128.6719 150.1078,128.0859 Q151.1625,127.5 152.35,127.5 Q153.0688,127.5 153.6938,127.75 Q154.3188,128 154.85,128.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="159" x="170.15" y="136.9102">FeitianCardReaderController</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="124" x2="346" y1="148" y2="148"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="157.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="65" x="143" y="163.4189">LOG : Logger</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="171.2539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="185" x="143" y="177.2549">instance : FeitianCardReaderController</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="185.0898"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="198" x="143" y="191.0908">cardReaders : Map&lt;String, ICardReader&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="198.9258"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="143" y="204.9268">bluetoothAdapter : BluetoothAdapter</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="212.7617"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="143" y="218.7627">pairedDevices : Set&lt;BluetoothDevice&gt;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="226.5977"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="143" y="232.5986">context : Context</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="124" x2="346" y1="239.0156" y2="239.0156"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="248.4336"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="143" y="254.4346">FeitianCardReaderController()</text><ellipse cx="134" cy="265.2695" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="64" x="143" y="268.2705">getInstance()</text><ellipse cx="134" cy="279.1055" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="143" y="282.1064">getCardReaders()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="289.9414"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="143" y="295.9424">init()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="303.7773"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="132" x="143" y="309.7783">intitializeBluetoothAdapter()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="317.6133"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="143" y="323.6143">createReceiver()</text><ellipse cx="134" cy="334.4492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="143" y="337.4502">createCardEventTransmitter()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="345.2852"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="143" y="351.2861">readDevices()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="359.1211"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="64" x="143" y="365.1221">checkUuids()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="131" y="372.957"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="143" y="378.958">addNewAndInform()</text><polygon fill="#4177AF" points="134,385.793,130,391.793,138,391.793" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="143" y="392.7939">removeAndInform()</text><ellipse cx="134" cy="403.6289" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="143" y="406.6299">checkAdapter()</text><ellipse cx="134" cy="417.4648" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="143" y="420.4658">actualizeReaderList()</text><ellipse cx="134" cy="431.3008" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="143" y="434.3018">actualizeSocketToDevice()</text><!--class CardEventTransmitter--><rect fill="#FEFECE" filter="url(#fwcpwgdsekhuq)" height="131.0156" id="CardEventTransmitter" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="154" y="501"/><ellipse cx="173.5" cy="517" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M175.5,513.5 Q175.7031,513 175.9375,512.75 Q176.1719,512.5 176.4375,512.5 Q176.9063,512.5 177.2031,512.7813 Q177.5,513.0625 177.5,513.7188 L177.5,515.2813 Q177.5,515.9375 177.2188,516.2188 Q176.9375,516.5 176.5,516.5 Q176.1094,516.5 175.8594,516.3281 Q175.6094,516.1563 175.5,515.7031 Q175.4531,515.3906 175.2813,515.2188 Q174.9688,514.8906 174.4063,514.6953 Q173.8438,514.5 173.2813,514.5 Q172.5781,514.5 171.9922,514.7813 Q171.4063,515.0625 170.9531,515.6875 Q170.5,516.3125 170.5,517.1719 L170.5,518.0938 Q170.5,519.125 171.3438,519.8125 Q172.1875,520.5 173.6875,520.5 Q174.5781,520.5 175.2031,520.2969 Q175.5625,520.1875 175.9688,519.8281 Q176.2344,519.625 176.375,519.5625 Q176.5156,519.5 176.6875,519.5 Q177.0156,519.5 177.2578,519.7578 Q177.5,520.0156 177.5,520.375 Q177.5,520.7188 177.1563,521.125 Q176.6563,521.7188 175.8594,522.0469 Q174.8125,522.5 173.5313,522.5 Q172.0313,522.5 170.8281,521.9063 Q169.8594,521.4375 169.1797,520.4219 Q168.5,519.4063 168.5,518.2031 L168.5,517.1094 Q168.5,515.8594 169.1016,514.7656 Q169.7031,513.6719 170.7578,513.0859 Q171.8125,512.5 173,512.5 Q173.7188,512.5 174.3438,512.75 Q174.9688,513 175.5,513.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="188.5" y="521.9102">CardEventTransmitter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="155" x2="315" y1="533" y2="533"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="162" y="542.418"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="174" y="548.4189">cardReader : ICardReader</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="155" x2="315" y1="554.8359" y2="554.8359"/><polygon fill="#4177AF" points="165,563.2539,161,569.2539,169,569.2539" style="stroke: #1963A0; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="174" y="570.2549">CardEventTransmitter()</text><ellipse cx="165" cy="581.0898" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="174" y="584.0908">informAboutCardPresent()</text><ellipse cx="165" cy="594.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="174" y="597.9268">informAboutCardAbsent()</text><ellipse cx="165" cy="608.7617" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="174" y="611.7627">informAboutCardTimeout()</text><ellipse cx="165" cy="622.5977" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="174" y="625.5986">informAboutCardUnknown()</text><!--class AbstractAndroidCardReaderController--><rect fill="#FEFECE" filter="url(#fwcpwgdsekhuq)" height="48" id="AbstractAndroidCardReaderController" style="stroke: #A80036; stroke-width: 1.5;" width="240" x="115" y="8"/><ellipse cx="130" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M132,20.5 Q132.2031,20 132.4375,19.75 Q132.6719,19.5 132.9375,19.5 Q133.4063,19.5 133.7031,19.7813 Q134,20.0625 134,20.7188 L134,22.2813 Q134,22.9375 133.7188,23.2188 Q133.4375,23.5 133,23.5 Q132.6094,23.5 132.3594,23.3281 Q132.1094,23.1563 132,22.7031 Q131.9531,22.3906 131.7813,22.2188 Q131.4688,21.8906 130.9063,21.6953 Q130.3438,21.5 129.7813,21.5 Q129.0781,21.5 128.4922,21.7813 Q127.9063,22.0625 127.4531,22.6875 Q127,23.3125 127,24.1719 L127,25.0938 Q127,26.125 127.8438,26.8125 Q128.6875,27.5 130.1875,27.5 Q131.0781,27.5 131.7031,27.2969 Q132.0625,27.1875 132.4688,26.8281 Q132.7344,26.625 132.875,26.5625 Q133.0156,26.5 133.1875,26.5 Q133.5156,26.5 133.7578,26.7578 Q134,27.0156 134,27.375 Q134,27.7188 133.6563,28.125 Q133.1563,28.7188 132.3594,29.0469 Q131.3125,29.5 130.0313,29.5 Q128.5313,29.5 127.3281,28.9063 Q126.3594,28.4375 125.6797,27.4219 Q125,26.4063 125,25.2031 L125,24.1094 Q125,22.8594 125.6016,21.7656 Q126.2031,20.6719 127.2578,20.0859 Q128.3125,19.5 129.5,19.5 Q130.2188,19.5 130.8438,19.75 Q131.4688,20 132,20.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="208" x="144" y="28.9102">AbstractAndroidCardReaderController</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="116" x2="354" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="116" x2="354" y1="48" y2="48"/><!--link AbstractAndroidCardReaderController to FeitianCardReaderController--><path d="M235,76.267 C235,88.02 235,101.476 235,115.735 " fill="none" id="AbstractAndroidCardReaderController-FeitianCardReaderController" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="228,76.002,235,56.002,242,76.002,228,76.002" style="stroke: #A80036; stroke-width: 1.0;"/><!--link FeitianCardReaderController to CardEventTransmitter--><path d="M235,456.425 C235,472.041 235,487.083 235,500.749 " fill="none" id="FeitianCardReaderController-CardEventTransmitter" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="235" cy="449.304" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235" x2="235" y1="457.304" y2="441.304"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="227" x2="243" y1="449.304" y2="449.304"/><!--
@startuml

    package de.gematik.ti.cardreader.provider.bluetooth.feitian.control {
      class FeitianCardReaderController {
          {static} - LOG : Logger
          {static} - instance : FeitianCardReaderController
          - cardReaders : Map<String, ICardReader>
          - bluetoothAdapter : BluetoothAdapter
          - pairedDevices : Set<BluetoothDevice>
          - context : Context
          - FeitianCardReaderController()
          {static} + getInstance()
          + getCardReaders()
          - init()
          - intitializeBluetoothAdapter()
          - createReceiver()
          + createCardEventTransmitter()
          - readDevices()
          - checkUuids()
          - addNewAndInform()
          ~ removeAndInform()
          + checkAdapter()
          + actualizeReaderList()
          + actualizeSocketToDevice()
      }
    }

    package de.gematik.ti.cardreader.provider.bluetooth.feitian.control {
      class CardEventTransmitter {
          - cardReader : ICardReader
          ~ CardEventTransmitter()
          + informAboutCardPresent()
          + informAboutCardAbsent()
          + informAboutCardTimeout()
          + informAboutCardUnknown()
      }
    }

    FeitianCardReaderController -up-|> AbstractAndroidCardReaderController
    FeitianCardReaderController +-down- CardEventTransmitter


@enduml

PlantUML version 1.2019.06(Fri May 24 19:10:25 CEST 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_202-release-1483-b03
Operating System: Windows 7
OS Version: 6.1
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>